$(function(){var a=COMMON.OPT,c=(a.colorOpt,a.oilOpt),d=a.classOpt,e=a.statusOpt,f=[{id:"appointmentNum",name:"预约编号"},{id:"maintainfortNum",name:"维修单号"},{id:"truename",name:"真实姓名"},{id:"platenumber",name:"车牌号"},{id:"phone",name:"电话"},{id:"maintaintype",name:"类别"},{id:"status",name:"状态"}],g=[{id:"itemId",name:"推荐项目ID"},{id:"pageName",name:"套餐名称"},{id:"milesMin",name:"最小公里数"},{id:"milesMax",name:"最大公里数"},{id:"brand",name:"品牌"},{id:"series",name:"车系"}],h=[{id:"productID",name:"商品编码"},{id:"productname",name:"商品名称"},{id:"unit",name:"单位"},{id:"productnum",name:"数量"},{id:"unitprice",name:"单价"},{id:"maintenanceMan",name:"领料人"}],k=($("div.dialog"),{id:"table",port:"appointmentList.do",delport:"appointmentDelete.do",itemId:"appointmentNum",th:f,param:{pageNum:1,status:0}}),l={itemId:"appointmentNum",id:"appId",editurl:"appointmentDetail.do",saveurl:"appointmentSaveOrUpdate.do",editItem:[{id:"appointmentNum",name:"预约单号",value:""},{id:"truename",name:"真实姓名",value:""},{id:"platenumber",name:"车牌号",value:""},{id:"phone",name:"电话",value:""},{id:"maintaintype",name:"类别",value:"",type:1,selected:"保养",options:d},{id:"status",name:"状态",value:"",type:1,selected:"0",options:e},{id:"oil",name:"油耗",value:"",type:1,selected:"0",options:c},{id:"usedComponents",name:"备注",value:"",type:2}],callback:function(a){$("span.fred","div.opt-tit").html(e[a.status]["text"])}},m={id:"yuyuexiangmu",port:"recommendItemList.do",th:g,param:{pageNum:1}},n={id:"yuyuepeijian",port:"usedCompontInput.do",saveport:"",isCheck:!0,th:h,param:{pageNum:1}},o=document.location.href.indexOf("opt.html")>-1;o?(COMMON.addTpl({edit:1}),COMMON.addTpl({table:1,th:f}),COMMON.edit("edit",l),COMMON.table(m),COMMON.table(n),$("a#btn-lingliao").on("click",function(){var d,e,a=$("input:checkbox",$("div.winpop")),b="",c="";for(d=0,e=a.length;e>d;d++)c=a.eq(d).parent().next().attr("data-id"),b=""==b?c:b+";"+c;COMMON.ajaxFn({url:"usedCompontInput.do",obj:{mainId:COMMON.getQuery("id"),productID:b},callback:function(a){1==a.code&&($("div.winpop").hide(),$(".dialog-tips").dialog({title:"提示",content:"保存成功",button:[{text:"确定",cls:"btn-ok",handler:function(a){a.dialog("hide")}}],callback:function(a){a.addClass("w400")}}))}})})):(COMMON.addTpl({table:1,th:f}),COMMON.table(k))});