!function(){function d(c){var d=$(c),e=$.trim(d.val()||""),f=d.attr("id").substring(1);if($msg_txt=d.siblings(".msg"),"User"==f||"user"==f){if(!e)return $msg_txt.html("用户名不能为空").addClass("error").show(),a.user=!1,void 0;if(!b.test(e))return $msg_txt.html("格式错误").addClass("error").show(),a.user=!1,void 0;a.user=!0}else if("Pwd"==f||"pwd"==f){if(!e)return $msg_txt.html("密码不能为空").addClass("error").show(),a.pwd=!1,void 0;a.pwd=!0}else if("Repwd"==f||"repwd"==f){if(!e)return $msg_txt.html("重复密码不能为空").addClass("error").show(),a.pwd=!1,void 0;if(e!=$("#"+d.attr("id").substring(0,1)+"Pwd").val())return $msg_txt.html("与密码不一致").addClass("error"),a.repwd=!1,void 0;a.repwd=!0}$msg_txt.removeClass("error").hide()}function e(){$("input","div.item").on("blur",function(){d($(this))}),$("a.btn-ok").on("click",function(){var e,f,g,h,i,j,b=$(this);if(b.hasClass("btn-reg")){for(e=$("input",$("div.on")),f=$("div.agree-msg"),g=0,h=e.length;h>g;g++)i=e.eq(g),i.length>0&&i.on("blur",d(i));a.user&&a.pwd&&a.repwd&&($("#agreement").attr("checked")?f.siblings(".msg").removeClass("error"):f.addClass("error"),j={name:$("#pUser").val(),pwd:$("#pPwd").val()},$.ajax({url:"http://115.159.77.210:8080/ybcl2.0/enterprise/com.register.do",data:j,type:"POST",dataType:"jsonp",success:function(a){1==a.code?location.href="/yibaochelian/index.html":f.addClass("error").html(a.desc||"").show()},error:function(){f.addClass("error").html("服务请求错误").show()}}))}else if(b.hasClass("btn-next"))i=$("#name",c),i.on("blur",d(i)),a.user&&($("div.step1",c).hide(),$("div.step2",c).show());else if(b.hasClass("btn-setpwd")){for(e=$("div.step2 input",c),g=0,h=e.length;h>g;g++)i=e.eq(g),i.length>0&&i.on("blur",d(i));a.pwd&&a.repwd&&($("div.step2",c).hide(),$("div.step3",c).show())}})}var a={},b=/^([a-z0-9_\.-]+)@([\da-z\.-]+)\.([a-z\.]{2,6})$/i,c=$("div.getpwd");e()}();