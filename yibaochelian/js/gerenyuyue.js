$(function(){function a(a,b){var c=$("div.winpop"),d=$("div.mask"),e=$("div.bd",c);"appointmentTime"==a||(c.show(),d.show(),e.hide(),$("div."+a,c).show())}var b=$("div.winpop"),c=$("div.mask"),d=COMMON.OPT,e=d.colorOpt||[],f=d.oilOpt||[],g=d.classOpt||[],h=[{id:"productID",name:"商品编码"},{id:"productname",name:"商品名称"},{id:"unit",name:"单位"},{id:"productnum",name:"数量"},{id:"unitprice",name:"单价"},{id:"maintenanceMan",name:"领料人"}],i={itemId:"",id:"appId",editurl:"appointmentDetail.do",saveurl:"appointmentSaveOrUpdate.do",editItem:[{id:"truename",name:"车主姓名",value:"",dataType:"name"},{id:"phone",name:"联系电话",value:"",dataType:"phone"},{id:"address",name:"地址",value:""},{id:"platenumber",name:"车牌号",value:""},{id:"brand",name:"品牌",value:"",click:a},{id:"series",name:"车型",value:"",click:a},{id:"color",name:"颜色",value:"",type:1,selected:"0",options:e},{id:"motorNumber",name:"发动机号",value:"",dataType:"number"},{id:"oil",name:"油表状态",value:"",type:1,selected:0,options:f},{id:"miles",name:"里程",value:""},{id:"appointmentTime",name:"预约日期",value:"",dataType:"time"},{id:"facilitatorList",name:"预约4S店",value:"",click:a},{id:"appointmentType",name:"故障类型",value:"",type:1,selected:"保养",options:g},{id:"usedCompontInput",name:"预约配件",value:"",click:a},{id:"recommID",name:"推荐项目",value:"",click:a},{id:"note",name:"备注",value:""}],callback:function(a,b){$("span.fred","div.opt-tit").html(optionsStatus[a.status].text),b.$watch("usedCompontInput",function(){})}},j={id:"yuyuepeijian",port:"usedCompontInput.do",th:h,isCheck:!0,isOpt:!1,param:{pageNum:1,status:0},callback:function(a){for(var d=[],e=$("input:checked",$("div.usedCompontInput")),f=0,g=e.length;g>f;f++)d.push(e.eq(f).val());$("#usedCompontInput").val(d.join(";")),b.hide(),c.hide()}};COMMON.addTpl({edit:1}),COMMON.edit("edit",i),$("#peijian").on("click",function(){$("div.dialog-peijian").show()}),COMMON.addTpl({table:1,th:h}),COMMON.table(j);var k=avalon.define("tuijianxiangmu",function(a){a.tr=[],a.getTr=function(){var b=$.extend({},COMMON.defaultParam);COMMON.ajaxFn({url:"recommendItemList.do",obj:b,callback:function(b){1==b.code&&(a.tr=b.data||{})}})},a.saveItem=function(){saveData("recommID")}});avalon.scan(),k.getTr()});