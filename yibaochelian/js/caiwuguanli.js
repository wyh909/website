$(function(){function v(a,b){$("div.tabcon").off().on("click","tr td:nth-child(2)",function(c){var d=$(c.target).text(),e=$.extend({},g);"listCollectionByPage.do"==b?e.userId=d:e.supplierId=d,COMMON.ajaxFn({url:b,obj:e,callback:function(b){1==b.code&&(a.tr=b.data.data||[])}})})}var u,t,a=[{id:"supplierId",name:"供应商编号"},{id:"supplierName",name:"供应商名称"},{id:"amount",name:"总金额"},{id:"amountPaid",name:"已付金额"},{id:"unpaidAmount",name:"未付金额"},{id:"unpaidAmount",name:"超额"}],b=[{id:"amount",name:"总金额"},{id:"amountPaid	",name:"已付金额"},{id:"unpaidAmount",name:"未付金额"},{id:"accountPayableNum",name:"单号"},{id:"type",name:"业务类型"}],c=[{id:"useId",name:"用户编号"},{id:"useName",name:"用户名称"},{id:"amount",name:"发生额"},{id:"amountReceived",name:"收款额"},{id:"outstandingAmount",name:"余额"},{id:"outstandingAmount",name:"超额"}],d=[{id:"startDate",name:"开单日期"},{id:"amount",name:"发生额"},{id:"amountReceived",name:"收款额"},{id:"outstandingAmount",name:"余额"},{id:"collectionNum",name:"单号"},{id:"type",name:"业务类型"}],e=[{id:"amount",name:"应收总额"},{id:"amountReceived",name:"已收总额"},{id:"thisCollection",name:"本次合计"},{id:"thisCollection",name:"实际收款"},{id:"reviewer",name:"审核人"},{id:"startDate",name:"审核日期"}],f=[{id:"amount",name:"应付总额"},{id:"amountPaid",name:"已付金额"},{id:"thisPayment",name:"本次合计"},{id:"thisPayment",name:"实际付款"},{id:"reviewer",name:"审核人"},{id:"startDate",name:"审核日期"}],g={pageNumber:1,pageSize:10},h={id:"paytableall",port:"listAccountByPage.do",itemId:"id",th:a,isOpt:!1,param:g,callback:function(a){i.param=$.extend({},g,{supplierId:a.tr[0].id}),COMMON.table(i)}},i={id:"paytablesingle",port:"listAccountByPage.do",delport:"deleteAccount.do",itemId:"id",th:b,isOpt:!0,param:g,callback:function(a){v(a,i.port)}},j={id:"tableall",port:"listCollectionByPage.do",itemId:"id",th:c,isOpt:!1,param:g,callback:function(a){i.param=$.extend({},g,{userId:a.tr[0].id}),COMMON.table(k)}},k={id:"tablesingle",port:"listCollectionByPage.do",delport:"deleteCollection.do",itemId:"id",th:d,isOpt:!0,param:g,callback:function(a){v(a,k.port)}},l={id:"totalTable",port:"listCollectionByPage.do",itemId:"id",th:e,isOpt:!1,param:g},m={id:"totalTable",port:"listAccountByPage.do",th:f,isOpt:!1,param:g},n=[{text:"应收款",value:1},{text:"预收款",value:2},{text:"直接收款",value:3}],o=[{text:"挂账",value:1},{text:"会员卡",value:2},{text:"零现钱",value:3}],p=[{text:"挂账",value:1},{text:"会员卡",value:2},{text:"零现钱",value:3}],q={itemId:"mainId",id:"id",addurl:"",editurl:"listAccById.do",saveurl:"addAccount.do",edittype:0,editItem:[{id:"accountPayableNum",name:"单号",value:""},{id:"supplierId",name:"供应商编号",value:""},{id:"supplierName",name:"供应商名称",value:""},{id:"paymentTerms",name:"支付方式",value:"",type:1,selected:1,options:o},{id:"accountPayee",name:"收款账户",value:"",type:1,selected:1,options:p},{id:"accountType",name:"收款类型",value:"",type:1,selected:1,options:n},{id:"type",name:"业务类型",value:"",type:1,selected:1,options:[{text:"采购欠款",value:1},{text:"采购付款",value:2}]},{id:"amount",name:"总金额",value:"",dataType:"number"},{id:"amountPaid",name:"已付金额",value:""},{id:"unpaidAmount",name:"未付金额",value:""},{id:"thisPayment",name:"本次付款",value:""},{id:"department",name:"部门",value:""},{id:"note",name:"备注",type:2,value:""}]},r={itemId:"mainId",id:"id",addurl:"",editurl:"listCollById.do",saveurl:"addCollection.do",edittype:0,editItem:[{id:"useId",name:"客户编号",value:""},{id:"useName",name:"客户名称",value:""},{id:"collectionNum",name:"单号",value:""},{id:"type",name:"业务类型",value:"",type:1,selected:1,options:[{text:"销售欠款",value:1},{text:"销售付款",value:2}]},{id:"paymentTerms",name:"支付方式",value:"",type:1,selected:1,options:o},{id:"accountPayee",name:"收款账户",value:"",type:1,selected:1,options:p},{id:"accountType",name:"收款类型",value:"",type:1,selected:1,options:n},{id:"amount",name:"总金额",value:""},{id:"amountReceived",name:"已收金额",value:""},{id:"outstandingAmount",name:"未收金额",value:""},{id:"thisCollection",name:"本次收款",value:""},{id:"reviewer",name:"审核人",value:""},{id:"note",name:"备注",type:2,value:""}]},s=document.location.href.indexOf("opt.html")>-1;s?(t=null,COMMON.addTpl({table:1,th:a}),COMMON.addTpl({edit:1}),0==COMMON.getQuery("type")?(t=r,u=l,$("div.opt-tit").html("应收账单")):(t=q,u=m,$("div.opt-tit").html("应付账单")),t.callback=function(){$("#paymentTerms").on("click",function(){var a=$(this),b=a.val();(b=1)&&$("#accountPayee").val(1)})},COMMON.edit("edit",t),COMMON.table(u)):(COMMON.addTpl({table:1,th:a}),COMMON.table(h),COMMON.table(j))});